# 前提说明

我的url的信息 

```java
{
    "status": "success",
    "mgs": "验证成功",
    "data": {
        "result": {
            "userId": 1,
            "userYnVip": 1,
            "userBalance": 0,
            "userIntegral": 0,
            "userYhjCount": 0,
            "userName": "1660937656",
            "userSex": "男",
            "userNickname": "钟意C++",
            "userBirthday": "2020-08-09"
        }
    }
}
```



| 信息   | 解释                                                       |
| ------ | ---------------------------------------------------------- |
| status | 请求的状态   有2种  success代表成功  还有一种fail 代表失败 |
| mgs    | 请求之后的一个信息                                         |
| data   | 请求之后的返回数据 其中的result代表的是 数据               |

请求  前面必须要 加一个api

就比如 

/api/user/selectId/1



水果图片的位置

/fruitImages



用户头像的位置

/userImages



# 用户表

首先看看字段

| 字段           | 说明                        |
| -------------- | --------------------------- |
| user_id        | 唯一的id                    |
| user_name      | 账号                        |
| user_yn_vip    | 是否是会员 1代表是0代表不是 |
| user_sex       | 性别 男或者女               |
| user_nickname  | 昵称                        |
| user_birthday  | 生日                        |
| user_balance   | 余额                        |
| user_integral  | 积分                        |
| user_yhj_count | 优惠卷的数量                |
| user_password  | 密码                        |

我想让你看 这些 字段代表的信息是一件很不爽的事情  **可以选择跳过这一步  等到看到下面url使用的时候来看也不迟**



## 根据id查询用户

**url**:表名/selectId/id 



假设我要查询id为1的用户  

url:api/user/selectId/1

返回结果

```java
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": {
            "userId": 1,fd
            "userYnVip": 1,
            "userBalance": 0 ,
            "userIntegral": 0,
            "userYhjCount": 0,
            "userName": "1660937656",
            "userSex": "男",
            "userNickname": "钟意C++",
            "userBirthday": "2020-08-09"
        }
    }
}
```

失败的情况  也就是数据库没有此id的用户

```java
{
    "status": "fail",
    "mgs": "没有此id对应的对象",
    "data": {
        "result": "结果被狗吃了"
    }
}
```





## 登录验证

**url**:/user/checkUser?userName=用户名&passWord=密码



成功的情况

url:api/user/checkUser?userName=1660937656&passWord=1000

```
{
    "status": "success",
    "mgs": "验证成功",
    "data": {
        "result": {
            "userId": 1,
            "userYnVip": 1,
            "userBalance": 0,
            "userIntegral": 0,
            "userYhjCount": 0,
            "userName": "1660937656",
            "userSex": "男",
            "userNickname": "钟意C++",
            "userBirthday": "2020-08-09"
        }
    }
}
```



失败的情况

url:api/user/checkUser?userName=1660937656&passWord=100

```
{
    "status": "fail",
    "mgs": "验证失败",
    "data": {
        "result": false
    }
}
```





## 万能查询

简单的说就是你自定义你要查询的字段名与条件 



**url**:/表名/selectAllType?column=你要查询的字段名&condition=条件



假设我要查询 性别为男的 用户  只显示 账号

那么

url:api/user/selectAllType?column=user_name,&condition=user_sex=男

user_name代表账号  可以往上面看看  

结果

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "userId": 0,
                "userYnVip": 0,
                "userBalance": 0,
                "userIntegral": 0,
                "userYhjCount": 0,
                "userName": "1660937656",
                "userSex": "\u0000",
                "userNickname": null,
                "userBirthday": null
            }
        ]
    }
}
```

可以明确的看到   结果中只有 userName的值是 有的 其他均是默认值



**多个字段 与条件 逗号分割**

api/user/selectAllType?column=xxxxx,xxxxx&condition=xxxx=1,xxxx=2





## 添加用户

url:user/addUser



后面便是参数

**参数详解**

| 参数         | 详解         | 是否必要                                 |
| ------------ | ------------ | ---------------------------------------- |
| userName     | 账号         | 是                                       |
| userPassWord | 密码         | 是                                       |
| userSex      | 性别         | 否 如果不写默认是男   如果是女 必须写上  |
| userNickname | 昵称         | 是                                       |
| userBirthday | 生日         | 否  如果不填是当前时间                   |
| userYnVip    | 是否是Vip    | 否 默认不是 为0  如果是显示指定为1       |
| userBalance  | 余额         | 否 默认为0  如果不是显示指定余额数量     |
| userIntegral | 积分         | 否 默认为10000  如果不是显示指定积分数量 |
| userYhjCount | 优惠卷的数量 | 否 默认为0  如果不是显示指定优惠卷数量   |
| image        | 用户的头像   | 否 默认为null                            |

**userSex注意只能是男或者女** 否则后台异常





就比如  我需要创建一个  账号为188900  然后密码为180808080   然后昵称是 大黑狗   

那么

api/user/addUser?userName=188900&userNickname=大黑狗&userPassWord=180808080

其他均为默认值



**成功情况**

示例

```
{
    "status": "success",
    "mgs": "添加成功",
    "data": {
        "result": {
            "userId": 19,
            "userYnVip": 0,
            "userBalance": 0,
            "userIntegral": 0,
            "userYhjCount": 0,
            "userName": "188900",
            "userSex": "男",
            "userNickname": "大黑狗",
            "userBirthday": "2020-08-13",
            "userPassWord": "180808080",
            "userImagesUrl": null
        }
    }
}
```







**失败情况1**  因为账号有人注册

```
{
     "status": "fail",
    "mgs": "此账号已经有人注册了",
    "data": {
        "result": "这辈子不可能给结果的"
    }
}
```





**失败情况2**    服务器超时



```
{
     "status": "fail",
    "mgs": "同一时间注册的人太多了,休息一下几秒重试吧",
    "data": {
        "result": "这辈子不可能给结果的"
    }
}
```



**注意的是 账号 需要前端的朋友做一个 效验**    就比如177990111yao 这样的

**账号就跟微信的账号一样  用户自定义 但是后续不可以更改了**



**账号唯一性**







## 修改用户

url:/user/updateUser



**需要的参数**

| 参数         | 说明                                                    | 是否必要 |
| ------------ | ------------------------------------------------------- | -------- |
| userBirthday | 用户的生日 **但是如果不写是默认当前时间  所以必须写上** | 是       |
| userPassWord | 用户的密码                                              | 是       |
| userNickname | 用户的昵称                                              | 是       |
| userSex      | 用户的性别   如果不写默认是男   如果是女 必须写上       | 否       |
| userId       | 用户的id                                                | 是       |
| image        | 用户的头像  默认为null                                  | 否       |

**但是注意 前端的朋友必须要 传一个正确的id  不要乱搞**





**而且请求必须是post**

示例

api/user/updateUser?userId=2&userNickname=大黑狗11&userPassWord=180808080



修改成功

```
{
    "status": "success",
    "mgs": "成功修改",
    "data": {
        "result": true
    }
}
```



失败的url:api/user/updateUser?userId=2&userNickname=大黑狗11  （可以发现没有userPassWord字段）

```
{
    "status": "fail",
    "mgs": "参数有问题详情参照文档",
    "data": {
        "result": "结果今天忘记带了"
    }
}
```



## 增加用户的积分

url:api/user/addUserIntegral?count=&userId=

参数表

| 参数   | 说明         | 是否必要 |
| ------ | ------------ | -------- |
| count  | 增加多少积分 | 是       |
| userId | 用户的id     | 是       |

api/user/addUserIntegral?count=100&userId=2

```
{
    "status": "success",
    "mgs": "修改成功",
    "data": {
        "result": true
    }
}
```



# 水果商品表



字段

| 字段                 | 详情信息                              |
| -------------------- | ------------------------------------- |
| fruit_name           | 水果的名称                            |
| fruit_text           | 水果的描述信息                        |
| fruit_Images_count   | 水果图片的数量                        |
| fruit_images_url     | 水果图片的url                         |
| fruit_invented_price | 水果的虚拟价格                        |
| fruit_price          | 水果的真实价格                        |
| fruit_is_time        | 是否是限时抢购商品 1代表是  0代表不是 |

如果水果的图片的数量是1  那么直接使用url就行  假设是  香蕉.png   那么就是/fruitImages/香蕉.png

  如果是2并且超过2   假设url  为 苹果.png    那么第一张就是  /fruitImages/苹果1.png

第二张就是 /fruitImages/苹果2.png

## 减去水果的数量

url:api/fruitgoods/updateCout?reduce=&fruitId=&shopId=



参数说明

| 参数    | 说明         | 是否必要 |
| ------- | ------------ | -------- |
| reduce  | 要减去的数量 | 是       |
| fruitId | 水果的id     | 是       |
| shopId  | 店铺id       | 是       |



就比如我要减去10     水果id为1  

店铺id为 1的



api/fruitgoods/updateCout?reduce=10&fruitId=1&shopId=1



成功的示例

```
{
    "status": "success",
    "mgs": "修改成功",
    "data": {
        "result": "商品数量的新值994"
    }
}
```





失败的示例1

```
{
    "status": "fail",
    "mgs": "修改失败(商品强的太激烈了",
    "data": {
        "result": "false"
    }
}
```



失败的示例2  //一般出现这种问题 都是 水果id不存在  或者  店铺id不存在

```
{
    "status": "fail",
    "mgs": "修改失败",
    "data": {
        "result": "参数有问题哦"
    }
}
```



## 查询数量

url:

/fruitgoods/selectFruitCout?fruitId=&shopId=

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| fruitId | 水果的id | 是       |
| shopId  | 店铺id   | 是       |



示例

查询 水果id为1 然后 在店铺id为1的 数量

/api/fruitgoods/selectFruitCout?fruitId=1&shopId=1

成功

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": "当前商品的数量975"
    }
}
```





失败的url:

/api/fruitgoods/selectFruitCout?fruitId=1&shopId=2

我此时的数据库 并没有  店铺为2的店铺

```
{
    "status": "fail",
    "mgs": "查询失败",
    "data": {
        "result": "参数有问题 并没有数据"
    }
}
```





## 根据id查询

url:/api/fruitgoods/selectId/id



查询id为1的水果

/api/fruitgoods/selectId/1

示例

**成功**

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": {
            "fruitId": 1,
            "fruitImagesCount": 1,
            "fruitInventedPrice": 8,
            "fruitPrice": 11,
            "fruitVesion": 0,
            "fruitImagesUrl": "/ht.png",
            "fruitName": "黄桃",
            "fruitText": "外表是黄黄的"
            "fruitIsTime":1
        }
    }
}
```





失败

 /api/fruitgoods/selectId/100

```
{
    "status": "fail",
    "mgs": "没有此id对应的对象",
    "data": {
        "result": "结果被狗吃了"
    }
}
```





## 万能查询

上面介绍一个了

需要配合 字段名来查询

**url**:/表名/selectAllType?column=你要查询的字段名&condition=条件





就比如我要查询 水果表id为1的水果名

 /api/fruitgoods/selectAllType?column=fruit_name&condition=fruit_id=1;



**建议使用 selectId  因为做了 优化**

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 0,
                "fruitImagesCount": 0,        
                "fruitInventedPrice": 0,
                "fruitPrice": 0,            
                "fruitName": "黄桃",
                "fruitImagesUrl": "/ht.png",
                "fruitText": null
                "fruitIsTime":1
            }
        ]
    }
}
```



**可以看到只有fruitName 是有值的**







## 搜索水果商品

url

 /api/fruitgoods/selectSearch?searchValue=&pageCount=&page=



参数解析

| 参数        | 说明           | 是否必要 |
| ----------- | -------------- | -------- |
| searchValue | 搜索时的参数   | 是       |
| pageCount   | 一页多少个数据 | 是       |
| page        | 第几页         | 是       |



前端的朋友一定不要传错了  因为我没有处理   因为可以从很多的角度说  如果处理了  效率就会低, 然后可读性也会低  简单的说就是我太懒了







就比如  搜索一个   桃 关键字  然后 每页有1条数据   第1页  

 /api/fruitgoods/selectSearch?searchValue=桃&pageCount=2&page=1



效果

```
{
    "status": "查询成功",
    "mgs": "总页数为:{2},当前页数为1",
    "data": {
        "result": [
            {
                "fruitId": 1,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 8,
                "fruitPrice": 11,
               
                "fruitImagesUrl": "/ht.png",
                "fruitName": "黄桃",
                "fruitText": "外表是黄黄的"
                "fruitIsTime":1
            }
        ]
    }
}
```



然后第二页

 /api/fruitgoods/selectSearch?searchValue=桃&pageCount=2&page=2

```
{
    "status": "查询成功",
    "mgs": "总页数为:{2},当前页数为2",
    "data": {
        "result": [
            {
                "fruitId": 4,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                "fruitIsTime":1
                "fruitImagesUrl": "/ht.png",
                "fruitName": "猕猴桃",
                "fruitText": "1"
            }
        ]
    }
}
```



失败例子

 /api/fruitgoods/selectSearch?searchValue=桃&pageCount=2&page=3

可知我的总页数为2  那么第3页就会 没数据

```java
{
    "status": "查询成功",
    "mgs": "总页数为:{2},当前页数为3",
    "data": {
        "result": []
    }
}
```





## **门店热销**

url:/api/fruitgoods/selectHeat?shopId=&showCount=



参数详解

| 参数      | 说明                 | 是否必需 |
| --------- | -------------------- | -------- |
| shopId    | 店铺的id             | 是       |
| showCount | 要显示的数据几条数据 | 是       |



就比如我要查询 店铺id为 1的  热销水果  显示  3个前面的





/api/fruitgoods/selectHeat?shopId=1&showCount=3

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 2,
                "fruitImagesCount": 2,
                "fruitInventedPrice": 222,
                "fruitPrice": 22,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "草莓",
                "fruitText": "22"
                "fruitIsTime":1
            },
            {
                "fruitId": 3,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "苹果",
                "fruitText": "11"
                "fruitIsTime":1
            },
            {
                "fruitId": 1,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 8,
                "fruitPrice": 11,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "黄桃",
                "fruitText": "外表是黄黄的"
                "fruitIsTime":1
            }
        ]
    }
}
```

可以看到 草莓的热销量最高



## 水果的热销量

url:你猜

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| shopId  | 店铺的id | 是       |
| fruitId | 水果的id | 是       |



示例

查询 店铺id为1 然后水果id为2的  热销量

/api/fruitgoods/selectFruitHeat?shopId=1&fruitId=2

```
{
    "status": "success",
    "mgs": "好棒棒",
    "data": {
        "result": "水果热销量为1111"
    }
}
```



如果 参数有误  

就比如我还没钱 开第二家 店铺   



/api/fruitgoods/selectFruitHeat?shopId=2&fruitId=2

```
{
    "status": "fail",
    "mgs": "没有 此数据",
    "data": {
        "result": "没有结果哦"
    }
}
```



## 入园采摘

url: /api/fruitgoods/selectPluck



成功的示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 1,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 8,
                "fruitPrice": 11,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "黄桃",
                "fruitText": "外表是黄黄的"
                "fruitIsTime":1
            },
            {
                "fruitId": 2,
                "fruitImagesCount": 2,
                "fruitInventedPrice": 222,
                "fruitPrice": 22,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "草莓",
                "fruitText": "22"
                "fruitIsTime":1
            }
        ]
    }
}
```





## 限时抢购

url:/api/fruitgoods/selectTimebuy?isno=&count=

参数

| 参数  | 说明                 | 是否必要 |
| ----- | -------------------- | -------- |
| isno  | 是否进行数据量的限制 | 否       |
| count | 限制多少数据         | 否       |

isno:如果不传 默认是 0  代表 我不要 进行数据量的限制   如果想要那么 传入1

count :如果不传默认是1  代表  只显示一条数据



如果我要查询 限时抢购的所有商品

/api/fruitgoods/selectTimebuy





如果我要进行 数据限制   限制为2 

/api/fruitgoods/selectTimebuy?isno=1&count=2

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 1,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 8,
                "fruitPrice": 11,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "黄桃",
                "fruitText": "外表是黄黄的"
                "fruitIsTime":1
            },
            {
                "fruitId": 4,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "猕猴桃",
                "fruitText": "1"
                "fruitIsTime":1
            }
        ]
    }
}
```

当然如果限制为1  也可以这么写

/api/fruitgoods/selectTimebuy?isno=1  或者/api/fruitgoods/selectTimebuy?isno=1&count=1

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 1,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 8,
                "fruitPrice": 11,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "黄桃",
                "fruitText": "外表是黄黄的"
                "fruitIsTime":1
            }
        ]
    }
}
```

**注意的是 此url   是在 首页 显示 限时抢购的商品 定义显示多少数据  然后请求  限制的url**

**然后点开全部的商品 请求全部的限时抢购的商品**

**也就是项目中只会请求 2次url**

**如果请求的多了  会造成 缓存过多**

不懂就来问一下我 赖得写了



## 轻食果切

url: /api/fruitgoods/selectCut

查询成功

```java
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 4,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                "fruitImagesUrl": "/ht.png",
                "fruitName": "猕猴桃",
                "fruitText": "1"
                 "fruitIsTime":1
            }
        ]
    }
}
```



## 新品上市

url: /api/fruitgoods/selectNew

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 1,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 8,
                "fruitPrice": 11,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "黄桃",
                "fruitText": "外表是黄黄的"
                "fruitIsTime":1
            }
        ]
    }
}
```



## 精选套餐

/api/fruitgoods/selectChoice

示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 2,
                "fruitImagesCount": 2,
                "fruitInventedPrice": 222,
                "fruitPrice": 22,
                "fruitImagesUrl": "/ht.png",
                "fruitName": "草莓",
                "fruitText": "22"
                "fruitIsTime":1
            }
        ]
    }
}
```



## 店长推荐



 /api/fruitgoods/selectRecommend?shop_id=



| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| shop_id | 店铺的id | 是       |

就比如我要获取  店铺为1  推荐的商品

 /api/fruitgoods/selectRecommend?shop_id=1

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 2,
                "fruitImagesCount": 2,
                "fruitInventedPrice": 222,
                "fruitPrice": 22,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "草莓",
                "fruitIsTime":1
                "fruitText": "22"
            },
            {
                "fruitId": 4,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                "fruitImagesUrl": "/ht.png",
                "fruitName": "猕猴桃",
                "fruitText": "1"
                "fruitIsTime":1
            }
        ]
    }
}
```



## 漂洋过海

url: /api/fruitgoods/selectOcean

示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 4,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                "fruitImagesUrl": "/ht.png",
                "fruitName": "猕猴桃",
                "fruitText": "1"
                "fruitIsTime":1
            }
        ]
    }
}
```

## 国产精品

url: /api/fruitgoods/selectDomestic

示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 4,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                "fruitImagesUrl": "/ht.png",
                "fruitName": "猕猴桃",
                "fruitText": "1"
                "fruitIsTime":1
            }
        ]
    }
}
```

## 特色饮品

url: /api/fruitgoods/selectDrink

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 9,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
               "fruitImagesUrl": "/ht.png",
                "fruitName": "西瓜汁",
                "fruitText": "1"
                "fruitIsTime":1
            }
        ]
    }
}
```

## 休闲食品

url: /api/fruitgoods/selectFood

示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 14,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 22,
                "fruitPrice": 1,
                 "fruitImagesUrl": "/ht.png",
                "fruitName": "芒果干",
                "fruitText": "1"
                "fruitIsTime":1
            }
        ]
    }
}
```

## 积分商城

url:/api/fruitgoods/selectIntegral

示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "fruitId": 2,
                "fruitImagesCount": 2,
                "fruitInventedPrice": 1200,
                "fruitPrice": 1200,
                "fruitImagesUrl": "2",
                "fruitName": "草莓",
                "fruitText": "22"
                "fruitIsTime":1
            },
            {
                "fruitId": 3,
                "fruitImagesCount": 1,
                "fruitInventedPrice": 1200,
                "fruitPrice": 1200,
                "fruitImagesUrl": "1",
                "fruitName": "苹果",
                "fruitText": "11"
                "fruitIsTime":1
            }
        ]
    }
}
```

注意的是   1200  是 积分  不是 1200 rmb



# 店铺表

表名为shop

| 字段名       | 说明       |
| ------------ | ---------- |
| shop_id      | 店铺的id   |
| shop_name    | 店铺的名称 |
| shop_address | 店铺的地址 |



## 查询所有的店铺

/api/shop/selectAll



**示例成功**

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "shopId": 1,
                "shopName": "铁道学院店",
                "shopAddress": "铁道学院旁边的茅草街12号"
            }
        ]
    }
}
```

可以看到现在没钱只有一个 店铺



## 根据id查询店铺

参数

| 参数 | 说明     | 是否必要 |
| ---- | -------- | -------- |
| id   | 店铺的id | 是       |

/api/api/shop/selectId?id=



查询id是1的店铺

/api/api/shop/selectId?id=1



# 商品评价表

**表名**:appraiseGoods

| 参数            | 说明         |
| --------------- | ------------ |
| appraise_id     | id           |
| appraise_text   | 评价文字     |
| fruit_id        | 商品水果的id |
| shop_id         | 店铺的id     |
| user_id         | 用户的id     |
| appraise_time   | 评价的时间   |
| appraise_number | 评价的星数   |

**前端的朋友 可以限制用户的评价文字   150字以下**



## 查询某个商品的评价

url:/api/appraise/selectFruitApp 

参数

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| shopId  | 店铺的id | 是       |
| fruitId | 商品的id | 是       |



我要查询 店铺 id为1 然后 商品id为1的 全部评价

/api/appraise/selectFruitApp?shopId=1&fruitId=1



示例

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "appraiseId": 2,
                "appraiseText": "水果挺不错的 ",
                "fruitId": 2,
                "shopId": 1,
                "userId": 2,
                "appraiseTime": "2020-08-13 17:12:34"
            }
        ]
    }
}
```



## 添加评价

url: /api/appraise/addAppraise?appraiseText=&fruitId=&shopId=&userId=

| 参数           | 说明       | 是否必要 |
| -------------- | ---------- | -------- |
| appraiseText   | 评价的文字 | 是       |
| fruitId        | 商品id     | 是       |
| shopId         | 店铺的id   | 是       |
| userId         | 用户的id   | 是       |
| appraiseNumber | 评价的星数 | 是       |

**建议使用post请求 因为文字 可能超过url的大小**

**示例**

url: /api/appraise/addAppraise?appraiseText=要不是看谭某人帅怎么可能5星好评&fruitId=3&shopId=1&userId=2&appraiseNumber=5

```
{
    "status": "success",
    "mgs": "添加成功",
    "data": {
        "result": true
    }
}
```



## 删除评价

 /api/appraise/deleteAppraise?appraiseId=

| 参数       | 说明     | 是否必要 |
| ---------- | -------- | -------- |
| appraiseId | 评价的id | 是       |





## 根据用户查询所有的评价

| 参数   | 说明     | 是否必要 |
| ------ | -------- | -------- |
| userId | 用户的id | 是       |





就比如我要查询 id为1的用户 的所以评价

/api/appraise/selectUserAppraise?userId=2

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "appraiseId": 4,
                "appraiseText": "11",
                "fruitId": 3,
                "shopId": 1,
                "userId": 2,
                "appraiseTime": "2020-08-13 17:33:08",
                "appraiseNumber": 0
            },
            {
                "appraiseId": 5,
                "appraiseText": "要不是看谭某人帅就不给5星好评了",
                "fruitId": 3,
                "shopId": 1,
                "userId": 2,
                "appraiseTime": "2020-08-13 18:10:31",
                "appraiseNumber": 5
            },
            {
                "appraiseId": 6,
                "appraiseText": "要不是看谭某人帅怎么可能5星好评",
                "fruitId": 3,
                "shopId": 1,
                "userId": 2,
                "appraiseTime": "2020-08-13 18:12:18",
                "appraiseNumber": 5
            }
        ]
    }
}
```





# 购物车





## 根据用户查询 购物车 数据

url:/api/shopping/selectUserShopping?userId=



| 参数   | 说明     | 是否必要 |
| ------ | -------- | -------- |
| userId | 用户的id | 是       |





查询用户id为2的购物车数据

/api/shopping/selectUserShopping?userId=2

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "shoppingId": 1,
                "shoppingCount": 1,
                "shoppingStatus": 1,
                "fruit": {
                    "fruitId": 1,
                    "fruitImagesCount": 1,
                    "fruitInventedPrice": 8,
                    "fruitPrice": 11,
                    "fruitImagesUrl": "/ht.png",
                    "fruitName": "黄桃",
                    "fruitText": "外表是黄黄的"
                }
            },
            {
                "shoppingId": 2,
                "shoppingCount": 222,
                "shoppingStatus": 1,
                "fruit": {
                    "fruitId": 2,
                    "fruitImagesCount": 2,
                    "fruitInventedPrice": 222,
                    "fruitPrice": 22,
                    "fruitImagesUrl": "2",
                    "fruitName": "草莓",
                    "fruitText": "22"
                }
            }
        ]
    }
}
```

url参数详解

| 参数           | 说明                             |
| -------------- | -------------------------------- |
| shoppingId     | 购物车的id                       |
| shoppingCount  | 商品的数量                       |
| shoppingStatus | 购物车的状态 0是没有选中 1是选中 |
| fruit          | 水果的详情信息                   |







## 修改购物车的状态

url:/api/shopping/updateStatus?status=&shoppingId=



参数名

| 参数       | 说明                             | 是否必要 |
| ---------- | -------------------------------- | -------- |
| status     | 购物车的状态 0是没有选中 1是选中 | 是       |
| shoppingId | 购物车的id                       | 是       |





成功示例


/api/shopping/updateStatus?status=1&shoppingId=1

```
{
    "status": "success",
    "mgs": "修改成功",
    "data": {
        "result": true
    }
}
```



失败示例

/api/shopping/updateStatus?status=1&shoppingId=5

此时购物车中没有  id为5的数据

```
{
    "status": "success",
    "mgs": "修改失败",
    "data": {
        "result": false
    }
}
```





## 修改购物车的数量

/api/shopping/updateCount?count=&shoppingId=



参数详情

| 参数       | 说明                 | 是否必要 |
| ---------- | -------------------- | -------- |
| count      | 购物车单个商品的数量 | 是       |
| shoppingId | 购物车的id           | 是       |





成功示例

/api/shopping/updateCount?count=2&shoppingId=1

```
{
    "status": "success",
    "mgs": "修改成功",
    "data": {
        "result": true
    }
}
```



## 添加购物车

url:/api/shopping/addShopping?fruitId=&userId=&count=&status=



| 参数    | 说明                   | 是否必要                   |
| ------- | ---------------------- | -------------------------- |
| fruitId | 水果商品的id           | 是                         |
| userId  | 用户的id               | 是                         |
| count   | 购物车中单个商品的数量 | 是                         |
| status  | 选中状态               | 否 默认是0 如果是1显示指定 |

**这里的status  必须是 1 或者0  前端的朋友注意一下**

![](Smimages/mei.jpg)



成功示例

/api/shopping/addShopping?fruitId=3&userId=1&count=2 

因为status 默认为0  所以不用指定  

```
{
    "status": "success",
    "mgs": "添加成功",
    "data": {
        "result": true
    }
}
```





## 删除购物车

url:/api/shopping/deleteShopping?shoppingId=



参数

| 参数       | 说明       | 是否必要 |
| ---------- | ---------- | -------- |
| shoppingId | 购物车的id | 是       |



成功示例

```
{
    "status": "success",
    "mgs": "删除成功",
    "data": {
        "result": true
    }
}
```







# 地址



## 查询地址

url:/api/address/selectUserAddress?userId=



| 参数   | 说明     | 是否必要 |
| ------ | -------- | -------- |
| userId | 用户的id | 是       |



查询用户1的 所有地址

/api/address/selectUserAddress?userId=1



```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "addressId": 1,
                "addressText": "铁道学院",
                "addressDefault": 0,
                "addressName": "1",
                "addressPhone": "1563325819"
            },
            {
                "addressId": 2,
                "addressText": "桃源街道",
                "addressDefault": 1,
                "addressName": "1",
                "addressPhone": "1563325819"
            }
        ]
    }
}
```



假设没有 用户 没有设置地址

那么

```
{
    "status": "success",
    "mgs": "此用户没有地址",
    "data": {
        "result": "没有结果的亲"
    }
}
```



## 删除地址

/api/address/delectAddress?addressId=

| 参数      | 说明     | 是否必要 |
| --------- | -------- | -------- |
| addressId | 地址的id | 是       |





**示例**

/api/address/delectAddress?addressId=1

```
{
    "status": "success",
    "mgs": "删除成功",
    "data": {
        "result": true
    }
}
```





## 设置默认地址

url:/api/address/updateDefaultAddress?userId=&addressId=

| 参数      | 说明               | 是否必要 |
| --------- | ------------------ | -------- |
| userId    | 用户的id           | 是       |
| addressId | 设置为默认地址的id | 是       |





示例

/api/address/updateDefaultAddress?userId=1&addressId=2

将id为1的用户 默认地址设置为      地址id为1的 地址

```
{
    "status": "success",
    "mgs": "设置成功",
    "data": {
        "result": true
    }
}
```





## 查询用户名默认地址

/api/address/selectUserDefaultAddress?userId=



| 参数   | 说明     | 是否必要 |
| ------ | -------- | -------- |
| userId | 用户的id | 是       |



查询id为1 的用户  默认地址

/api/address/selectUserDefaultAddress?userId=1



```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": {
            "addressId": 2,
            "addressText": "桃源街道",
            "addressDefault": 1,
            "addressName": "1",
            "addressPhone": "1563325819"
        }
    }
}
```



如果没有

```
{
    "status": "success",
    "mgs": "此用户没有地址",
    "data": {
        "result": "没有结果的亲"
    }
}
```

## 添加地址

/api/address/insertAddress?addressText=&addressName=&addressPhone=&userId=



参数列表

| 参数           | 说明         | 是否必要  |
| -------------- | ------------ | --------- |
| addressText    | 地址         | 是        |
| addressName    | 地址的联系人 | 是        |
| addressPhone   | 电话         | 是        |
| userId         | 用户的id     | 是        |
| addressDefault | 是否默认     | 否默认是0 |

## 修改地址

url:/api/api/address/updateAddress?addressId=&addressText=&addressName=&addressPhone=

| 参数           | 说明     | 是否必要  |
| -------------- | -------- | --------- |
| addressId      | 地址的id | 是        |
| addressText    | 地址     | 是        |
| addressName    | 名称     | 是        |
| addressPhone   | 电话     | 是        |
| userId         | 用户的id | 是        |
| addressDefault | 是否默认 | 否默认是0 |



# 订单



## 查询此用户的所有订单

url:
/api/order/selectAllUserOrder?userId=



参数

| 参数   | 说明     | 是否必要 |
| ------ | -------- | -------- |
| userId | 用户的id | 是       |



查询id为2  所有订单

/api/order/selectAllUserOrder?userId=2

```
{
    "status": "success",
    "mgs": "查询成功",
    "data": {
        "result": [
            {
                "orderId": 1,
                "orderStatus": 2,
                "orderCount": 11,
                "fruit": {
                    "fruitId": 1,
                    "fruitImagesCount": 4,
                    "fruitInventedPrice": 12.4,
                    "fruitPrice": 13.5,
                    "fruitImagesUrl": "/冬枣.jpg",
                    "fruitName": "冬枣",
                    "fruitText": "这个枣它又大啊又圆"
                },
                "deOrderId": 1,
                "userId": 2,
                "address": {
                    "addressId": 2,
                    "addressText": "桃源街道",
                    "addressDefault": 0,
                    "addressName": "1",
                    "addressPhone": "1563325819"
                },
                "orderTime": "2020-08-20 09:02:57",
                "shop": {
                    "shopId": 1,
                    "shopName": "铁道学院店",
                    "shopAddress": "铁道学院旁边的茅草街12号"
                },
                "orderIntegral": 1,
                "oddTime": "这个属性没用啦,死靓仔"
            },
    {
                "orderId": 6,
                "orderStatus": 3,
                "orderCount": 2,
                "fruit": {
                    "fruitId": 3,
                    "fruitImagesCount": 2,
                    "fruitInventedPrice": 1200,
                    "fruitPrice": 1200,
                    "fruitImagesUrl": "/山竹.jpg",
                    "fruitName": "山竹",
                    "fruitText": "这个山竹好吃死人"
                },
                "deOrderId": 6,
                "userId": 2,
                "address": {
                    "addressId": 2,
                    "addressText": "桃源街道",
                    "addressDefault": 0,
                    "addressName": "1",
                    "addressPhone": "1563325819"
                },
                "orderTime": "2020-08-21 09:24:49",
                "shop": {
                    "shopId": 1,
                    "shopName": "铁道学院店",
                    "shopAddress": "铁道学院旁边的茅草街12号"
                },
                "orderIntegral": 0,
                "oddTime": "订单失效剩余时间:12小时 4分钟 0秒"
            },
    }
```



参数详解

| 参数          | 说明                                                         |
| ------------- | ------------------------------------------------------------ |
| orderId       | 订单的id编号                                                 |
| orderStatus   | 订单的状态 <br>0 代表 待评价<br/><br/>1 代表 退款成功<br/><br/>2 代表  待收货<br/><br/>3 代表  代付款<br/><br/>4  交易成功)<br/><br>5 订单失效<br><br>6 退款中 |
| orderCount    | 此订单的商品数量                                             |
| fruit         | 水果商品                                                     |
| deOrderId     | 订单详情的id                                                 |
| userId        | 此用户的id    前端的朋友可以忽略                             |
| address       | 订单的地址信息                                               |
| orderTime     | 订单的时间                                                   |
| shop          | 下单的店铺                                                   |
| orderIntegral | 是否是积分的订单 0代表不是 1代表是                           |
| oddTime       | 如果当前订单如果是 代付款 那么就是订单快失效的剩余时间       |





## 	从购物车购买 

url:
/api/order/clearShoping?userId=&shopId=&addressId=&orderstatus=



参数详解

| 参数        | 说明       | 是否必要 |
| ----------- | ---------- | -------- |
| userId      | 用户的id   | 是       |
| shopId      | 店铺的id   | 是       |
| addressId   | 地址的id   | 是       |
| orderstatus | 订单的状态 | 否 为5   |

orderstatus 要注意

状态 有  很多  不过下单的时候 一般 只有2个  一个是2 待收货  一个是3 代付款  如果是代付款请指定为3

示例

/api/order/clearShoping?userId=2&shopId=1&addressId=2&orderstatus=2

```
{
    "status": "success",
    "mgs": "创建订单成功",
    "data": {
        "result": true
    }
}
```







## 从商品详情直接购买

url:/api/order/addOrder?userId=&shopId=&addressId=&orderstatus=&fruitcount=8&fruitId=



参数

| 参数        | 说明           | 是否必要               |
| ----------- | -------------- | ---------------------- |
| userId      | 用户的id       | 是                     |
| shopId      | 店铺的id       | 是                     |
| addressId   | 地址的id       | 是                     |
| orderstatus | 订单的状态     | 否 为5                 |
| fruitcount  | 商品的数量     | 否 默认是1             |
| fruitId     | 商品的id       | 是                     |
| integral    | 是否是积分订单 | 默认为不是 如果是指定1 |





示例
/api/order/addOrder?userId=2&shopId=1&addressId=2&orderstatus=2&fruitcount=8&fruitId=3

```
{
    "status": "success",
    "mgs": "创建订单成功",
    "data": {
        "result": true
    }
}
```







## 删除订单

url:

/api/order/deleteOrder?orderId=

| 参数    | 说明       | 是否必要 |
| ------- | ---------- | -------- |
| orderId | 订单的编号 | 是       |





示例

```
{
    "status": "success",
    "mgs": "删除成功",
    "data": {
        "result": true
    }
}
```





## 订单改为待收货

/api/order/updateOrderStatus?status=2

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| orderId | 订单的id | 是       |
| shopId  | 店铺的id | 是       |
| userId  | 用户的id | 是       |



/api/order/updateOrderStatus?orderId=1&status=2&userId=1&shopId=1

```
{
    "status": "success",
    "mgs": "更新成功",
    "data": {
        "result": true
    }
}
```

## 订单改为退款成功

/api/order/updateOrderStatus?orderId=&status=1

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| orderId | 订单的id | 是       |
| shopId  | 店铺的id | 是       |
| userId  | 用户的id | 是       |

/api/order/updateOrderStatus?orderId=1&status=1&userId=1&shopId=1

```
{
    "status": "success",
    "mgs": "更新成功",
    "data": {
        "result": true
    }
}
```



## 订单改为失效

/api/order/updateOrderStatus?status=5

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| orderId | 订单的id | 是       |
| shopId  | 店铺的id | 是       |

/api/order/updateOrderStatus?orderId=1&status=5&shopId=1

## 积分订单退款

url:/api/order/integralDrawback

参数详情

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| userId  | 用户的id | 是       |
| shopId  | 店铺的id | 是       |
| orderId | 订单的id | 是       |





## 查询订单详情

/api/order/selectIdOrder?orderId=

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| orderId | 订单的id | 是       |



## 订单改为待评价

用于用户收货成功

/api/order/updateOrderStatus?status=0

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| orderId | 订单的id | 是       |
| shopId  | 店铺的id | 是       |



## 订单改为交易成功

用于用户收货成功 评价之后

/api/order/updateOrderStatus?status=4

| 参数    | 说明     | 是否必要 |
| ------- | -------- | -------- |
| orderId | 订单的id | 是       |
| shopId  | 店铺的id | 是       |